{"version":3,"file":"index.js","names":["LitElementWithProps","createRef","styleMap","ref"],"sources":["../../../../../../../../../../src/core/WebAuthnManager/LitComponents/HaloBorder/index.ts"],"sourcesContent":["import { html, css } from 'lit';\nimport { styleMap } from 'lit/directives/style-map.js';\nimport { ref, createRef, Ref } from 'lit/directives/ref.js';\nimport { LitElementWithProps } from '../LitElementWithProps';\n\nexport type HaloTheme = 'dark' | 'light';\n\nexport class HaloBorderElement extends LitElementWithProps {\n  static properties = {\n    animated: { type: Boolean },\n    theme: { type: String },\n    durationMs: { type: Number, attribute: 'duration-ms' },\n    ringGap: { type: Number, attribute: 'ring-gap' },\n    ringWidth: { type: Number, attribute: 'ring-width' },\n    ringBorderRadius: { type: String, attribute: 'ring-border-radius' },\n    ringBorderShadow: { type: String, attribute: 'ring-border-shadow' },\n    ringBackground: { type: String, attribute: 'ring-background' },\n    padding: { type: String },\n    innerPadding: { type: String, attribute: 'inner-padding' },\n    innerBackground: { type: String, attribute: 'inner-background' },\n  } as const;\n\n  declare animated?: boolean;\n  declare theme?: HaloTheme;\n  declare durationMs?: number;\n  declare ringGap?: number;\n  declare ringWidth?: number;\n  declare ringBorderRadius?: string;\n  declare ringBorderShadow?: string;\n  declare ringBackground?: string;\n  declare padding?: string;\n  declare innerPadding?: string;\n  declare innerBackground?: string;\n\n  private ringRef: Ref<HTMLDivElement> = createRef();\n  private rafId: number | null = null;\n  private startTs = 0;\n\n  static styles = css`\n    :host {\n      display: inline-block;\n      background: transparent;\n      border-radius: 2rem;\n      padding: 0;\n      max-width: 860px;\n      box-sizing: border-box;\n      width: fit-content;\n      height: fit-content;\n    }\n  `;\n\n  disconnectedCallback(): void {\n    super.disconnectedCallback();\n    if (this.rafId !== null) {\n      cancelAnimationFrame(this.rafId);\n      this.rafId = null;\n    }\n  }\n\n  private startAnimationIfNeeded(): void {\n    if (!this.animated || !this.ringRef.value) return;\n    if (this.rafId !== null) return; // already animating\n\n    const durationMs = this.durationMs ?? 1150;\n    const step = (now: number) => {\n      if (this.startTs === 0) this.startTs = now;\n      const elapsed = now - this.startTs;\n      const progress = (elapsed % durationMs) / durationMs; // 0..1\n      const angle = progress * 360;\n      const ring = this.ringRef.value!;\n      const stops = this.ringBackground ?? 'transparent 0%, #4DAFFE 10%, #4DAFFE 25%, transparent 35%';\n      ring.style.background = `conic-gradient(from ${angle}deg, ${stops})`;\n      this.rafId = requestAnimationFrame(step);\n    };\n    this.rafId = requestAnimationFrame(step);\n  }\n\n  protected updated(): void {\n    // Apply optional host shadow from prop\n    if (this.ringBorderShadow) {\n      this.style.boxShadow = this.ringBorderShadow;\n    } else {\n      this.style.removeProperty('box-shadow');\n    }\n    // Trigger/maintain animation\n    if (this.animated) {\n      this.startAnimationIfNeeded();\n    } else if (this.rafId !== null) {\n      cancelAnimationFrame(this.rafId);\n      this.rafId = null;\n    }\n  }\n\n  render() {\n    const ringGap = this.ringGap ?? 4;\n    const ringWidth = this.ringWidth ?? 2;\n    const ringBorderRadius = this.ringBorderRadius ?? '2rem';\n    const innerPadding = this.innerPadding ?? '2rem';\n    const innerBackground = this.innerBackground ?? 'var(--w3a-grey650)';\n    const theme = this.theme ?? 'light';\n\n    // matches React padding override behavior\n    const paddingOverride = this.padding ?? `${ringGap + ringWidth}px`;\n    const ringInsetPx = `-${ringGap + ringWidth}px`;\n\n    const haloInnerStyle = {\n      background: 'transparent',\n      border: '1px solid transparent',\n      borderRadius: '2rem',\n      padding: paddingOverride,\n      position: 'relative',\n    } as Record<string, string>;\n\n    const contentStyle = {\n      background: innerBackground,\n      borderRadius: ringBorderRadius,\n      padding: innerPadding,\n      position: 'relative',\n      zIndex: '2',\n    } as Record<string, string>;\n\n    const ringStops = this.ringBackground ?? 'transparent 0%, #4DAFFE 10%, #4DAFFE 25%, transparent 35%';\n    const ringStyle = {\n      position: 'absolute',\n      top: ringInsetPx,\n      right: ringInsetPx,\n      bottom: ringInsetPx,\n      left: ringInsetPx,\n      borderRadius: `calc(${ringBorderRadius} + ${ringGap}px + ${ringWidth}px)`,\n      pointerEvents: 'none',\n      zIndex: '3',\n      background: `conic-gradient(from 0deg, ${ringStops})`,\n      padding: `${ringWidth}px`,\n      WebkitMask: 'linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0)',\n      WebkitMaskComposite: 'xor',\n      maskComposite: 'exclude',\n    } as Record<string, string>;\n\n    return html`\n      <div class=\"w3a-halo-border-root ${theme}\">\n        <div class=\"w3a-halo-border-inner\" style=${styleMap(haloInnerStyle)}>\n          ${this.animated\n            ? html`\n                <div style=${styleMap({ position: 'relative', borderRadius: '2rem', overflow: 'visible' })}>\n                  <div ${ref(this.ringRef)} style=${styleMap(ringStyle)}></div>\n                  <div class=\"w3a-halo-border-content\" style=${styleMap(contentStyle)}>\n                    <slot></slot>\n                  </div>\n                </div>\n              `\n            : html`\n                <div class=\"w3a-halo-border-content\" style=${styleMap(contentStyle)}>\n                  <slot></slot>\n                </div>\n              `}\n        </div>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('w3a-halo-border', HaloBorderElement);\nexport default HaloBorderElement;\n"],"mappings":";;;;;;;;;;AAOA,IAAa,oBAAb,cAAuCA,gDAAoB;CACzD,OAAO,aAAa;EAClB,UAAU,EAAE,MAAM;EAClB,OAAO,EAAE,MAAM;EACf,YAAY;GAAE,MAAM;GAAQ,WAAW;;EACvC,SAAS;GAAE,MAAM;GAAQ,WAAW;;EACpC,WAAW;GAAE,MAAM;GAAQ,WAAW;;EACtC,kBAAkB;GAAE,MAAM;GAAQ,WAAW;;EAC7C,kBAAkB;GAAE,MAAM;GAAQ,WAAW;;EAC7C,gBAAgB;GAAE,MAAM;GAAQ,WAAW;;EAC3C,SAAS,EAAE,MAAM;EACjB,cAAc;GAAE,MAAM;GAAQ,WAAW;;EACzC,iBAAiB;GAAE,MAAM;GAAQ,WAAW;;;CAe9C,AAAQ,UAA+BC;CACvC,AAAQ,QAAuB;CAC/B,AAAQ,UAAU;CAElB,OAAO,SAAS,iBAAG;;;;;;;;;;;;CAanB,uBAA6B;AAC3B,QAAM;AACN,MAAI,KAAK,UAAU,MAAM;AACvB,wBAAqB,KAAK;AAC1B,QAAK,QAAQ;;;CAIjB,AAAQ,yBAA+B;AACrC,MAAI,CAAC,KAAK,YAAY,CAAC,KAAK,QAAQ,MAAO;AAC3C,MAAI,KAAK,UAAU,KAAM;EAEzB,MAAM,aAAa,KAAK,cAAc;EACtC,MAAM,QAAQ,QAAgB;AAC5B,OAAI,KAAK,YAAY,EAAG,MAAK,UAAU;GACvC,MAAM,UAAU,MAAM,KAAK;GAC3B,MAAM,WAAY,UAAU,aAAc;GAC1C,MAAM,QAAQ,WAAW;GACzB,MAAM,OAAO,KAAK,QAAQ;GAC1B,MAAM,QAAQ,KAAK,kBAAkB;AACrC,QAAK,MAAM,aAAa,uBAAuB,MAAM,OAAO,MAAM;AAClE,QAAK,QAAQ,sBAAsB;;AAErC,OAAK,QAAQ,sBAAsB;;CAGrC,AAAU,UAAgB;AAExB,MAAI,KAAK,iBACP,MAAK,MAAM,YAAY,KAAK;MAE5B,MAAK,MAAM,eAAe;AAG5B,MAAI,KAAK,SACP,MAAK;WACI,KAAK,UAAU,MAAM;AAC9B,wBAAqB,KAAK;AAC1B,QAAK,QAAQ;;;CAIjB,SAAS;EACP,MAAM,UAAU,KAAK,WAAW;EAChC,MAAM,YAAY,KAAK,aAAa;EACpC,MAAM,mBAAmB,KAAK,oBAAoB;EAClD,MAAM,eAAe,KAAK,gBAAgB;EAC1C,MAAM,kBAAkB,KAAK,mBAAmB;EAChD,MAAM,QAAQ,KAAK,SAAS;EAG5B,MAAM,kBAAkB,KAAK,WAAW,GAAG,UAAU,UAAU;EAC/D,MAAM,cAAc,IAAI,UAAU,UAAU;EAE5C,MAAM,iBAAiB;GACrB,YAAY;GACZ,QAAQ;GACR,cAAc;GACd,SAAS;GACT,UAAU;;EAGZ,MAAM,eAAe;GACnB,YAAY;GACZ,cAAc;GACd,SAAS;GACT,UAAU;GACV,QAAQ;;EAGV,MAAM,YAAY,KAAK,kBAAkB;EACzC,MAAM,YAAY;GAChB,UAAU;GACV,KAAK;GACL,OAAO;GACP,QAAQ;GACR,MAAM;GACN,cAAc,QAAQ,iBAAiB,KAAK,QAAQ,OAAO,UAAU;GACrE,eAAe;GACf,QAAQ;GACR,YAAY,6BAA6B,UAAU;GACnD,SAAS,GAAG,UAAU;GACtB,YAAY;GACZ,qBAAqB;GACrB,eAAe;;AAGjB,SAAO,kBAAI;yCAC0B,MAAM;mDACIC,oBAAS,gBAAgB;YAChE,KAAK,WACH,kBAAI;6BACWA,oBAAS;GAAE,UAAU;GAAY,cAAc;GAAQ,UAAU;KAAa;yBAClFC,cAAI,KAAK,SAAS,SAASD,oBAAS,WAAW;+DACTA,oBAAS,cAAc;;;;kBAKxE,kBAAI;6DAC2CA,oBAAS,cAAc;;;gBAGpE;;;;;;AAOhB,eAAe,OAAO,mBAAmB;AACzC,yBAAe"}