{"version":3,"file":"useQRFileUpload.js","names":["err: any"],"sources":["../../../../src/react/hooks/useQRFileUpload.ts"],"sourcesContent":["import { useRef, useCallback } from 'react';\nimport type { DeviceLinkingQRData } from '@/index';\n\nexport interface UseQRFileUploadOptions {\n  onQRDetected?: (qrData: DeviceLinkingQRData) => void;\n  onError?: (error: Error) => void;\n}\n\nexport interface UseQRFileUploadReturn {\n  fileInputRef: React.RefObject<HTMLInputElement | null>;\n  handleFileUpload: (event: React.ChangeEvent<HTMLInputElement>) => Promise<void>;\n  isProcessing: boolean;\n}\n\nexport const useQRFileUpload = (options: UseQRFileUploadOptions): UseQRFileUploadReturn => {\n  const { onQRDetected, onError } = options;\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const isProcessingRef = useRef(false);\n\n  // Handle file upload\n  const handleFileUpload = useCallback(async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    console.log('useQRFileUpload: File upload -', { name: file.name, type: file.type, size: file.size });\n\n    try {\n      isProcessingRef.current = true;\n\n      const { scanQRCodeFromFile } = await import('../../utils/qrScanner');\n      const parsedQRData = await scanQRCodeFromFile(file);\n\n      console.log('useQRFileUpload: Valid file QR -', {\n        device2PublicKey: parsedQRData.device2PublicKey,\n        accountId: parsedQRData.accountId\n      });\n\n      onQRDetected?.(parsedQRData);\n\n    } catch (err: any) {\n      console.error('useQRFileUpload: File processing failed -', err.message);\n      onError?.(err);\n    } finally {\n      isProcessingRef.current = false;\n    }\n  }, [onQRDetected, onError]);\n\n  return {\n    fileInputRef,\n    handleFileUpload,\n    isProcessing: isProcessingRef.current,\n  };\n};"],"mappings":";;;;;AAcA,MAAa,mBAAmB,YAA2D;CACzF,MAAM,EAAE,cAAc,YAAY;CAElC,MAAM,iCAAwC;CAC9C,MAAM,oCAAyB;CAG/B,MAAM,0CAA+B,OAAO,UAA+C;EACzF,MAAM,OAAO,MAAM,OAAO,QAAQ;AAClC,MAAI,CAAC,KAAM;AAEX,UAAQ,IAAI,kCAAkC;GAAE,MAAM,KAAK;GAAM,MAAM,KAAK;GAAM,MAAM,KAAK;;AAE7F,MAAI;AACF,mBAAgB,UAAU;GAE1B,MAAM,EAAE,uBAAuB,2CAAM;GACrC,MAAM,eAAe,MAAM,mBAAmB;AAE9C,WAAQ,IAAI,oCAAoC;IAC9C,kBAAkB,aAAa;IAC/B,WAAW,aAAa;;AAG1B,kBAAe;WAERA,KAAU;AACjB,WAAQ,MAAM,6CAA6C,IAAI;AAC/D,aAAU;YACF;AACR,mBAAgB,UAAU;;IAE3B,CAAC,cAAc;AAElB,QAAO;EACL;EACA;EACA,cAAc,gBAAgB"}