# ProfileSettingsButton Theming

This widget uses a scoped token → CSS variable system applied via a provider and a boundary element.

## Components

- `ThemeProvider` — subscribes once to user preferences (uncontrolled) or accepts a controlled `theme` prop, merges token overrides, and exposes resolved tokens. See: `packages/passkey/src/react/components/ProfileSettingsButton/theme/ThemeProvider.tsx:1`.
- `ThemeScope` — applies the resolved tokens as CSS custom properties on a wrapping element and sets a theme data attribute. See: `packages/passkey/src/react/components/ProfileSettingsButton/theme/ThemeScope.tsx:1`.
- `useTheme` — reads from the provider and returns `{ theme, tokens, isDark, toggleTheme }`. See: `packages/passkey/src/react/components/ProfileSettingsButton/useTheme.ts:19`.

## Token → CSS Variable Mapping

Tokens are defined in `design-tokens.ts` and converted to CSS custom properties with a prefix (default `--w3a`). See: `packages/passkey/src/react/components/ProfileSettingsButton/theme/design-tokens.ts:1` and `packages/passkey/src/react/components/ProfileSettingsButton/theme/utils.ts:1`.

- Colors: `tokens.colors.<key>` → `--<prefix>-colors-<key>`
  - Example: `surfacePrimary` → `--w3a-colors-surfacePrimary`
- Spacing: `tokens.spacing.<key>` → `--<prefix>-spacing-<key>`
  - Example: `md` → `--w3a-spacing-md`
- Radius: `tokens.borderRadius.<key>` → `--<prefix>-border-radius-<key>`
  - Example: `lg` → `--w3a-border-radius-lg`
- Shadows: `tokens.shadows.<key>` → `--<prefix>-shadows-<key>`
  - Example: `sm` → `--w3a-shadows-sm`

The mapping is generated by `createCSSVariables(tokens, prefix)` and applied inline by `ThemeScope` on the boundary element. See: `packages/passkey/src/react/components/ProfileSettingsButton/theme/utils.ts:1`.

## Naming Convention

- Token object keys are lowerCamelCase (e.g., `surfacePrimary`, `textSecondary`). These keys are used verbatim in the CSS variable names after the semantic segment (color/spacing/radius/shadow).
- CSS variables are prefixed with `--w3a` by default. You can change the prefix via `ThemeProvider`'s `prefix` prop to avoid collisions when embedding.

Examples in CSS:

- Background: `background-color: var(--w3a-colors-surfacePrimary);`
- Border: `border-color: var(--w3a-colors-borderPrimary);`
- Text: `color: var(--w3a-colors-textPrimary);`
- Hover border: `border-color: var(--w3a-colors-borderHover);`

See usage in:

- `packages/passkey/src/react/components/ProfileSettingsButton/Web3AuthProfileButton.css:1`
- `packages/passkey/src/react/components/ProfileSettingsButton/UserAccountButton.css:1`
- `packages/passkey/src/react/components/ProfileSettingsButton/MenuItem.css:1`
- `packages/passkey/src/react/components/ProfileSettingsButton/ProfileDropdown.css:1`
- `packages/passkey/src/react/components/ProfileSettingsButton/TransactionSettingsSection.css:1`
- `packages/passkey/src/react/components/ProfileSettingsButton/GlassBorder.css:1`

## Controlled vs Uncontrolled

- Controlled: pass `theme="dark" | "light"` and handle `onThemeChange` to own state.
- Uncontrolled: omit `theme` and optionally set `defaultTheme`. The provider listens to `passkeyManager.userPreferences` and `prefers-color-scheme` for initial value.

`ProfileSettingsButton` wires the provider/scope internally and exposes these props for overrides: `theme`, `defaultTheme`, `onThemeChange`, `tokens`, `prefix`. See: `packages/passkey/src/react/components/ProfileSettingsButton/index.tsx:1`.

## Token Overrides (per instance)

Pass partial overrides for dark/light only for the keys you need to change:

```
<ProfileSettingsButton
  nearAccountId="alice.near"
  tokens={{
    dark: { colors: { surfacePrimary: 'oklch(0.25 0.012 240)' } },
    light: { colors: { borderHover: '#cbd5e1' } }
  }}
/>
```

You can also provide a function to compute overrides from the base tokens. See `ThemeProviderProps` in `ThemeProvider.tsx`.

## CSS Color Variables (reference)

The following CSS variables are generated from `tokens.colors.*` with the default prefix `--w3a`.

```
/* Color variables applied on the ThemeScope boundary (default prefix: --w3a) */
--w3a-color-primary: Brand primary color (buttons, key accents)
--w3a-color-primaryHover: Primary hover state
--w3a-color-secondary: Secondary accent color
--w3a-color-accent: Subtle/accented elements

--w3a-color-textPrimary: Primary text color
--w3a-color-textSecondary: Secondary text color
--w3a-color-textMuted: Muted/tertiary text

--w3a-color-surfacePrimary: Primary surfaces (cards, containers)
--w3a-color-surfaceSecondary: Secondary surfaces
--w3a-color-surfaceTertiary: Tertiary/hover surfaces

--w3a-color-hover: Generic hover background
--w3a-color-active: Active/pressed background
--w3a-color-focus: Focus ring / outline

--w3a-color-success: Success state color
--w3a-color-warning: Warning state color
--w3a-color-error: Error state color
--w3a-color-info: Informational state color

--w3a-color-borderPrimary: Primary borders/dividers
--w3a-color-borderSecondary: Secondary borders
--w3a-color-borderHover: Hovered/focused border
```

## File Status

- `packages/passkey/src/react/components/ProfileSettingsButton/variables.css` — legacy, not imported by ProfileSettingsButton after migration to token variables. Safe to remove once you confirm no external usage.
- `packages/passkey/src/react/components/ProfileSettingsButton/useTheme.ts` — in use. Provides `useTheme` and helpers; `useThemeCSS` has been removed in favor of `ThemeScope`.
